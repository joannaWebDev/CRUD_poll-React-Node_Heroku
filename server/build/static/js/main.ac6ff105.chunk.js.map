{"version":3,"sources":["components/Poll.js","App.js","index.js"],"names":["StrawPoll","useState","voteData","setVoteData","totalVotes","setTotalVotes","voted","setVoted","url","useEffect","fetch","then","response","json","data","sum","forEach","obj","votes","pollOptions","submitVote","e","voteSelected","target","dataset","id","voteCurrent","options","method","body","JSON","stringify","headers","res","console","log","map","item","className","onClick","data-id","option","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sLA2EeA,MAxEf,WACE,MAAgCC,qBAAhC,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAoCF,mBAAS,GAA7C,mBAAOG,EAAP,KAAmBC,EAAnB,KACA,EAA0BJ,oBAAS,GAAnC,mBAAOK,EAAP,KAAcC,EAAd,KAEMC,EAAM,SACZC,qBAAU,WACRC,MAAMF,GACHG,MAAK,SAACC,GAAD,OAAcA,EAASC,UAC5BF,MAAK,SAACG,GACLX,EAAYW,GACZ,IAAIC,EAAM,EACVD,EAAKE,SAAQ,SAAUC,GACrBF,GAAOE,EAAIC,SAEbb,EAAcU,QAEjB,IAEH,IAkBII,EAlBEC,EAAa,SAACC,GAClB,IAAc,IAAVf,EAAiB,CACnB,IAAMgB,EAAeD,EAAEE,OAAOC,QAAQC,GAChCC,EAAcxB,EAASoB,GAAcJ,MAC3ChB,EAASoB,GAAcJ,MAAQQ,EAAc,EAC7CrB,EAAcD,EAAa,GAC3BG,GAAUD,GACV,IAAMqB,EAAU,CACdC,OAAQ,OACRC,KAAMC,KAAKC,UAAU7B,GACrB8B,QAAS,CAAE,eAAgB,qBAE7BtB,MAAMF,EAAKmB,GACRhB,MAAK,SAACsB,GAAD,OAASA,EAAIpB,UAClBF,MAAK,SAACsB,GAAD,OAASC,QAAQC,IAAIF,QA8BjC,OAzBI/B,IACFiB,EAAcjB,EAASkC,KAAI,SAACC,GAC1B,OACE,+BACE,sBAAKC,UAAU,MAAf,UAEE,sBAAKA,UAAU,YAAf,UACE,qBAAKA,UAAU,QAAf,SAAwBD,EAAKZ,KAC7B,qBAAKa,UAAU,cACf,qBAAKA,UAAU,eACf,qBAAKA,UAAU,mBAEjB,qBAAKA,UAAU,aACf,qBAAKA,UAAU,cACf,qBAAKA,UAAU,kBAEjB,yBAAQC,QAASnB,EAAYoB,UAASH,EAAKZ,GAA3C,UACGY,EAAKI,OACN,sCAASJ,EAAKnB,MAAd,iBAfKmB,EAAKZ,QAuBlB,sBAAKa,UAAU,OAAf,UACE,qEACA,oBAAIA,UAAWhC,EAAQ,UAAY,UAAnC,SAA+Ca,IAC/C,8CAAiBf,S,MC1DRsC,MARf,WACE,OACE,8BACE,cAAC,EAAD,OCHNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.ac6ff105.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './Poll.css';\r\n\r\nfunction StrawPoll() {\r\n  const [voteData, setVoteData] = useState();\r\n  const [totalVotes, setTotalVotes] = useState(0);\r\n  const [voted, setVoted] = useState(false);\r\n\r\n  const url = '/poll/';\r\n  useEffect(() => {\r\n    fetch(url)\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setVoteData(data);\r\n        let sum = 0;\r\n        data.forEach(function (obj) {\r\n          sum += obj.votes;\r\n        });\r\n        setTotalVotes(sum);\r\n      });\r\n  }, []);\r\n\r\n  const submitVote = (e) => {\r\n    if (voted === false) {\r\n      const voteSelected = e.target.dataset.id;\r\n      const voteCurrent = voteData[voteSelected].votes;\r\n      voteData[voteSelected].votes = voteCurrent + 1;\r\n      setTotalVotes(totalVotes + 1);\r\n      setVoted(!voted);\r\n      const options = {\r\n        method: 'POST',\r\n        body: JSON.stringify(voteData),\r\n        headers: { 'Content-Type': 'application/json' },\r\n      };\r\n      fetch(url, options)\r\n        .then((res) => res.json())\r\n        .then((res) => console.log(res));\r\n    }\r\n  };\r\n\r\n  let pollOptions;\r\n  if (voteData) {\r\n    pollOptions = voteData.map((item) => {\r\n      return (\r\n        <li key={item.id} >       \r\n          <div className=\"box\">\r\n            {/* <i className=\"fa fa-heart-o heart\">❤️</i> */}\r\n            <div className=\"lid close\">\r\n              <div className=\"qmark\">{item.id}</div>\r\n              <div className=\"face ltop\"></div>\r\n              <div className=\"face lleft\"></div>\r\n              <div className=\"face lright\"></div>\r\n            </div>\r\n            <div className=\"face top\"></div>\r\n            <div className=\"face left\"></div>\r\n            <div className=\"face right\"></div>\r\n          </div>\r\n          <button onClick={submitVote} data-id={item.id}>\r\n            {item.option}\r\n            <span>- {item.votes} Votes</span>\r\n          </button>\r\n        </li>\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className=\"poll\">\r\n      <h1>Choose the gift behind box nº...</h1>\r\n      <ul className={voted ? 'results' : 'options'}>{pollOptions}</ul>\r\n      <p>Total Votes: {totalVotes}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StrawPoll;\r\n","import React from \"react\";\nimport Poll from \"./components/Poll\";\nimport \"./App.css\";\n\nfunction App() {\n  return (\n    <div >\n      <Poll />\n  </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}